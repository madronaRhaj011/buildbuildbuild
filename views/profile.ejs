<%- include('partials/start') %>
<%- include('partials/nav') %>

<div class="pt-20 flex items-center justify-center min-h-screen bg-gray-100">
    <form action="/updateProfile" method="post" class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
        <div>
          <p>Note: You will be required to login again after changes has been made.</p>
          <br>
        </div>
        <div class="mb-4">
          <input type="hidden" name="id" value="<%= user.id %>">
            <label for="username" class="block text-gray-700 font-semibold mb-2">Username:</label>
            <input 
                type="text" 
                name="username" 
                id="username" 
                value="<%= user.username %>" 
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
        </div>
        <div class="mb-4">
            <label for="email" class="block text-gray-700 font-semibold mb-2">Email:</label>
            <input 
                type="email" 
                name="email" 
                id="email" 
                value="<%= user.email %>" 
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
        </div>
        <button 
            type="submit" 
            class="w-full bg-indigo-500 text-white font-semibold py-2 rounded-lg hover:bg-indigo-600 transition-colors">
            Update Profile
        </button>
        <div class="mt-6 text-center">
            <p class="text-gray-600 mb-4">If you would like to update your password, click the button below:</p>
            <a 
                href="/email-verification" 
                class="inline-block bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
                Reset Password
            </a>
        </div>
    </form>
</div>


<script>
    const dropdown = document.querySelector('button');
    const menu = document.querySelector('.dropdown-menu');
    const chevron = document.querySelector('.chevron');
    
    dropdown.addEventListener('click', () => {
      menu.classList.toggle('opacity-100');
      menu.classList.toggle('translate-y-0');
      chevron.classList.toggle('rotate-180');
    });
    
    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
      if (!dropdown.contains(e.target)) {
        menu.classList.remove('opacity-100', 'translate-y-0');
        chevron.classList.remove('rotate-180');
      }
    });
    // Toggle dropdown visibility
    function toggleDropdown() {
      const dropdownMenu = document.getElementById("dropdownMenu");
      dropdownMenu.classList.toggle("hidden");
    }

    // Close dropdown when clicking outside
    document.addEventListener("click", function(event) {
      const dropdownButton = event.target.closest("button");
      const dropdownMenu = document.getElementById("dropdownMenu");

      if (!dropdownButton) {
        dropdownMenu.classList.add("hidden");
      }
    });
  </script>